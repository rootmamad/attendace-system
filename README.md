# Attendance System

## ูุนุฑู
ุงู ูพุฑูฺู ุจุง ูพุงุชูู ู ูุฑูโูุฑฺฉ Flask ุชูุณุนู ุฏุงุฏู ุดุฏู ุงุณุช ู ุดุงูู ุณู ูฺฉุฑูุณุฑูุณ ู ฺฉ ฺฉูุงูุช ุณุงุฏู ูโุจุงุดุฏ:
- ูฺฉุฑูุณุฑูุณ ุงุญุฑุงุฒ ููุช (Auth Service) ุจุฑุง ูุฑูุฏ ู ุซุจุชโูุงู ฺฉุงุฑููุฏุงู
- ูฺฉุฑูุณุฑูุณ ุซุจุช ุญุถูุฑ ู ุบุงุจ (Attendance Service) ุจุฑุง ุซุจุช ูุฑูุฏ ู ุฎุฑูุฌ ู ุงุฑุงุฆู ฺฏุฒุงุฑุดโูุง
- ูฺฉุฑูุณุฑูุณ ฺฏุฒุงุฑุด ุฒูุฏู (Reporter Service) ุจุฑุง ููุงุด ูุญุธูโุง ูุฑูุฏ ู ุฎุฑูุฌโูุง ุงุฒ ุทุฑู WebSocket
- ฺฉูุงูุช ุณุงุฏู HTML ุจุฑุง ุชุณุช ู ุงุฑุณุงู ุฏุฑุฎูุงุณุชโูุง

ุงู ุณุณุชู ุงุฒ **REST**ุ **gRPC** ู **WebSocket** ุจุฑุง ูพุงุฏูโุณุงุฒ APIูุง ุงุณุชูุงุฏู ูโฺฉูุฏ. ููฺูู ุจุฑุง ุงููุช ุฏุงุฏูโูุง ุงุฒ **JWT** ุงุณุชูุงุฏู ุดุฏู ุงุณุช.

> ุชูุฌู: ูพูุฑุชโูุง `8001`, `8002`, `8103`, `5500`, `50051`, ู `5432` ุจุงุฏ ุฎุงู ุจุงุดูุฏ.

---

## ุฑุงูโุงูุฏุงุฒ ู ูุตุจ

1. ฺฉููู ฺฉุฑุฏู ุฑูพุงุฒุชูุฑ:
```bash
git clone https://github.com/rootmamad/attendance-system.git
cd attendance-system
```

2. ุงุฌุฑุง ุจุง Docker:
```bash
docker compose up --build
```
ุณูพุณ ุจู ุขุฏุฑุณ ุฒุฑ ุจุฑูุฏ:  
[http://127.0.0.1:5500/index.html](http://127.0.0.1:5500/index.html)

---

## ูฺฉุฑูุณุฑูุณโูุง

### 1. Auth Service
- **ูพูุฑุช:** 8001  
- **ูุงูโูุง:** `app.py`, `routes.py`, `db.py`, `jwt_utils.py`, `Dockerfile`, `requirements.txt`

**ุชูุถุญุงุช ูุงูโูุง:**
- `app.py`: ุงุฌุฑุง ฺฉู ูฺฉุฑูุณุฑูุณ  
- `jwt_utils.py`: ุชููุฏ ู ุงุนุชุจุงุฑุณูุฌ JWT + ุฏฺฉูุฑุชูุฑ Middleware  
- `db.py`: ูุฏุฑุช ุงุชุตุงู ุจู ุฏุชุงุจุณ  
- `routes.py`: ุดุงูู Blueprint ู ุณู ุงูุฏูพููุช ุจุฑุง ุซุจุชโูุงูุ ูุฑูุฏ ู ูุณุช ฺฉุงุฑููุฏุงู (REST)  
- `requirements.txt`: ูุณุช ูุงุจุณุชฺฏโูุง  

---

### 2. Attendance Service
- **ูพูุฑุช:** 8002  
- **ูุงูโูุง:** `grpc_server.py`, `proto/`, `app.py`, `routes_rest.py`, `db.py`, `jwt_utils.py`, `Dockerfile`, `requirements.txt`

**ุชูุถุญุงุช ูุงูโูุง:**
- `grpc_server.py` ู `proto`: ูพุงุฏูโุณุงุฒ gRPC ู ูุชุฏูุง ูุณุช ู ุงุณุชุฑู  
- `routes_rest.py`: ุดุงูู Blueprint ุจุฑุง ูุฏุฑุช ูุฑูุฏ/ุฎุฑูุฌ ู ููุงุด ูุณุช ุฑูุฒ ุงุฎุฑ ุงุฒ ุทุฑู REST  
- ุณุงุฑ ูุงูโูุง ูุดุงุจู Auth Service  

---

### 3. Reporter Service
- **ูพูุฑุช:** 8103  
- **ูุงูโูุง:** `app.py`

ุงู ุณุฑูุณ ุจุง WebSocket ฺฉุงุฑ ูโฺฉูุฏ ู ูุธูู ุงุฑุณุงู ุฒูุฏู ุฑูุฏุงุฏูุง ุฌุฏุฏ ุญุถูุฑ ู ุบุงุจ ุจู ฺฉูุงูุชโูุง ุฑุง ุฏุงุฑุฏ. ุดุงูู ุฏู ุงูุฏูพููุช ุฏุฑ `app.py` ุงุณุช.

---

## ฺฉูุงูุช
ฺฉ ูุงู ุณุงุฏู HTML ุจุฑุง ุงุฑุณุงู ุฏุฑุฎูุงุณุชโูุง ู ุชุณุช APIูุง ูุฑุงุฑ ุฏุงุฏู ุดุฏู ุงุณุช.  
ุจุฑุง ุงุฌุฑุง:  
```
http://127.0.0.1:5500/index.html
```

---

## ูุงูโูุง ูพฺฉุฑุจูุฏ

- **docker-compose.yml**: ูุฏุฑุช ุณุฑูุณโูุง ู ุงุฌุฑุง ฺฉุงูุชูุฑูุง  
- **.env**: ุชุนุฑู ูุชุบุฑูุง ูุญุท ู ุฌููฺฏุฑ ุงุฒ ูุงุฑุฏฺฉุฏ ุดุฏู ููุงุฏุฑ ุฏุฑ ฺฉุฏูุง  

---

## ุชุณุช ุณุฑูุณโูุง

### 1. Register (Auth)
```bash
curl -X POST http://localhost:8001/register   -H "Content-Type: application/json"   -d '{"username":"emp2","password":"1234"}'
```

### 2. Login (Auth)
```bash
curl -X POST http://localhost:8001/login   -H "Content-Type: application/json"   -d '{"username":"emp2","password":"1234"}'
```
ุฎุฑูุฌ ฺฉ **JWT Token** ุงุณุช.

### 3. Attendance.List (gRPC)
```bash
grpcurl -plaintext   -d '{"employee_id":1,"jwt":"<JWT_TOKEN>"}'   localhost:50051 proto.AttendanceService.List
```

### 4. Attendance.StreamNew (gRPC โ ุงุณุชุฑู ุฒูุฏู)
```bash
grpcurl -plaintext   -d '{"employee_id":1,"jwt":"<JWT_TOKEN>"}'   localhost:50051 proto.AttendanceService.StreamNew
```

### 5. Reporter (WebSocket)
```bash
wscat -c "ws://localhost:8103/ws?token=<JWT_TOKEN>"
```
ูุฑ ุจุงุฑ ฺฉู Attendance ุฑฺฉูุฑุฏ ุฌุฏุฏ ุซุจุช ฺฉูุฏุ Reporter ุขู ุฑุง ุจู ฺฉูุงูุชโูุง WS ุงุฑุณุงู ูโฺฉูุฏ.

---

## ูพุงุงู
ูพุฑูฺู ฺฉุงูู ุดุฏุ ุขูุงุฏู ุจุฑุฑุณ ู ุงุณุชูุงุฏู! ๐

